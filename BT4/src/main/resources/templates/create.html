<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{_layout}">
<head>
    <title>Thêm Sản phẩm mới</title>
</head>
<body>
    <div layout:fragment="content">
        <div class="page-header">
            <h1>Thêm Sản phẩm mới</h1>
            <p class="text-muted">Nhập thông tin sản phẩm để thêm vào cửa hàng</p>
        </div>

        <div class="form-section">
            <form th:action="@{/products/save}" th:object="${product}" method="post" novalidate enctype="multipart/form-data">
                
                <div th:if="${error}" class="alert alert-danger alert-dismissible fade show" role="alert">
                    <span th:text="${error}"></span>
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
                
                <div class="mb-3">
                    <label for="productName" class="form-label">Tên Sản phẩm <span class="text-danger">*</span></label>
                    <input type="text" class="form-control" id="productName" th:field="*{productName}"
                           th:class="form-control + ${#fields.hasErrors('productName') ? ' is-invalid' : ''}">
                    <div th:if="${#fields.hasErrors('productName')}" class="invalid-feedback">
                        <span th:errors="*{productName}"></span>
                    </div>
                    <small class="form-text text-muted">Tối đa 100 ký tự</small>
                </div>

                <div class="mb-3">
                    <label for="price" class="form-label">Giá Sản phẩm <span class="text-danger">*</span></label>
                    <input type="number" class="form-control" id="price" th:field="*{price}"
                           min="1" max="9999999"
                           th:class="form-control + ${#fields.hasErrors('price') ? ' is-invalid' : ''}">
                    <div th:if="${#fields.hasErrors('price')}" class="invalid-feedback">
                        <span th:errors="*{price}"></span>
                    </div>
                    <small class="form-text text-muted">Từ 1 đến 9,999,999 đ</small>
                </div>

                <div class="mb-3">
                    <label for="imageFile" class="form-label">Hình ảnh Sản phẩm <span class="text-danger">*</span></label>
                    <input type="file" class="form-control" id="imageFile" name="imageFile" accept="image/*">
                    <small class="form-text text-muted">Chỉ chấp nhận file ảnh, dung lượng tối đa 5MB</small>
                </div>

                <div class="mb-3">
                    <label for="category" class="form-label">Danh mục <span class="text-danger">*</span></label>
                    <select class="form-select" id="category" th:field="*{category}"
                            th:class="form-select + ${#fields.hasErrors('category') ? ' is-invalid' : ''}">
                        <option value="">-- Chọn danh mục --</option>
                        <option th:each="cat : ${categories}" th:value="${cat}" th:text="${cat}"></option>
                    </select>
                    <div th:if="${#fields.hasErrors('category')}" class="invalid-feedback">
                        <span th:errors="*{category}"></span>
                    </div>
                </div>

                <div class="mb-3">
                    <button type="submit" class="btn btn-success">
                        <i class="bi bi-check-circle"></i> Thêm sản phẩm
                    </button>
                    <a href="/products" class="btn btn-secondary">
                        <i class="bi bi-arrow-left"></i> Quay lại
                    </a>
                </div>
            </form>
        </div>

        <div class="alert alert-info mt-3">
            <strong>Lưu ý:</strong>
            <ul class="mb-0">
                <li>Tên sản phẩm không được để trống</li>
                <li>Giá phải từ 1 đến 9,999,999 đ</li>
                <li>Vui lòng chọn danh mục</li>
                <li>Bắt buộc phải upload hình ảnh (tối đa 5MB)</li>
            </ul>
        </div>
    </div>
</body>
</html>
